<section class="login" aria-label="Sign in">
  <h1 class="login-title">Sign in</h1>

  <form [formGroup]="form" (ngSubmit)="submit()" class="form" novalidate>
    <div class="field">
      <mat-form-field appearance="outline" class="full">
        <mat-label>Email</mat-label>
        <input
          id="email"
          matInput
          type="email"
          formControlName="email"
          autocomplete="username"
          [errorStateMatcher]="matcher"
        />
        @if (form.controls.email.touched && form.controls.email.invalid) {
          <mat-error id="email-error">Enter a valid email</mat-error>
        }
      </mat-form-field>
      @if (form.controls.email.touched && form.controls.email.invalid) {
        <!-- kept for screen readers; MatError already renders visually -->
        <span class="sr-only">Enter a valid email</span>
      }
    </div>

    <div class="field">
      <mat-form-field appearance="outline" class="full">
        <mat-label>Password</mat-label>
        <input
          id="password"
          matInput
          [type]="hidePassword ? 'password' : 'text'"
          formControlName="password"
          autocomplete="current-password"
          [errorStateMatcher]="matcher"
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          [attr.aria-label]="hidePassword ? 'Show password' : 'Hide password'"
          (click)="hidePassword = !hidePassword"
        >
          <mat-icon>{{ hidePassword ? 'visibility' : 'visibility_off' }}</mat-icon>
        </button>
        @if (form.controls.password.touched && form.controls.password.invalid) {
          <mat-error>Password is required</mat-error>
        }
      </mat-form-field>
    </div>

    <button mat-flat-button color="primary" type="submit" class="full" [disabled]="submitting">
      {{ submitting ? 'Signing inâ€¦' : 'Sign in' }}
    </button>

    <div class="divider" aria-hidden="true">
      <mat-divider></mat-divider>
      <span>or</span>
    </div>

    <button
      mat-stroked-button
      type="button"
      class="full"
      (click)="signInWithGoogle()"
      [disabled]="submitting"
    >
      Continue with Google
    </button>

    <p class="hint">Demo credentials: <strong>admin@acme.test / admin</strong></p>
  </form>
</section>
